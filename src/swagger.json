{
  "openapi": "3.0.0",
  "info": {
    "title": "DronesBackend",
    "version": "1.0.0",
    "description": "DronesBackend project api"
  },
  "servers": [
    {
      "url": "http://localhost:8000"
    }
  ],
  "tags": [
    {
      "name": "Products"
    },
    {
      "name": "Auth"
    },
    {
      "name": "Users"
    },
    {
      "name": "Orders"
    },
    {
      "name": "Support"
    }
  ],
  "paths": {
    "/products": {
      "get": {
        "tags": ["Products"],
        "summary": "Отримати список всіх товарів",
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "products": [
                      {
                        "id": 1,
                        "name": "Drone X1",
                        "price": 1200,
                        "image": "picture",
                        "discount": 50,
                        "category": {
                          "id": 1,
                          "name": "drone"
                        }
                      },
                      {
                        "id": 2,
                        "name": "Thermal Cam T2",
                        "price": 1500,
                        "image": "picture",
                        "discount": 10,
                        "category": {
                          "id": 2,
                          "name": "thermal"
                        }
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "description": "Помилка сервера",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Server error"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Products"],
        "summary": "Створити новий товар",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "name": "Drone X5",
                "price": 1400,
                "description": "New model",
                "discount": 50,
                "category_id": 1,
                "blocks": [
                  {
                    "header": "header",
                    "description": "description",
                    "image": "picture",
                    "details": [
                      {
                        "characteristic": "characteristic",
                        "description": "description"
                      }
                    ]
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Успішно створено",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "id": 5,
                    "name": "new name",
                    "price": 1400,
                    "description": "New description",
                    "discount": 50,
                    "category": {
                      "id": 1,
                      "name": "drone"
                    },
                    "blocks": [
                      {
                        "header": "new header",
                        "description": "new description",
                        "image": "new picture",
                        "details": [
                          {
                            "characteristic": "new characteristic",
                            "description": "new description"
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "Помилка валідації",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Validation error"
                }
              }
            }
          },
          "500": {
            "description": "Помилка сервера",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Server error"
                }
              }
            }
          }
        }
      }
    },
    "/products/{id}": {
      "get": {
        "tags": ["Products"],
        "summary": "Отримати один товар за ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "id": 1,
                    "name": "Drone X1",
                    "price": 1200,
                    "image": "picture",
                    "discount": 50,
                    "category": {
                      "id": 1,
                      "name": "drone"
                    },
                    "blocks": [
                      {
                        "id": 1,
                        "header": "header",
                        "description": "description",
                        "image": "picture"
                      },
                      {
                        "id": 2,
                        "header": "header",
                        "description": "description",
                        "image": "video",
                        "details": [
                          {
                            "id": 1,
                            "characteristic": "characteristic",
                            "description": "description"
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "description": "Товар не знайдено",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Product not found"
                }
              }
            }
          },
          "500": {
            "description": "Помилка сервера",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Server error"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Products"],
        "summary": "Повне оновлення товару",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "name": "Drone X1",
                "price": 1200,
                "image": "picture",
                "discount": 50,
                "category_id": 1,
                "blocks": [
                  {
                    "header": "header",
                    "description": "description",
                    "image": "video",
                    "details": [
                      {
                        "characteristic": "characteristic",
                        "description": "description"
                      }
                    ]
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успішно оновлено",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "name": "Updated name",
                    "price": 1500,
                    "description": "Updated description",
                    "discount": 10,
                    "category": {
                      "id": 1,
                      "name": "drone"
                    },
                    "blocks": [
                      {
                        "header": "Updated header",
                        "description": "Updated description",
                        "image": "Updated video",
                        "details": [
                          {
                            "characteristic": "Updated characteristic",
                            "description": "Updated description"
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          },
          "404": {
            "description": "Товар не знайдено",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Product not found"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Products"],
        "summary": "Видалити товар",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "id": 1
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успішно видалено",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": null
                }
              }
            }
          },
          "404": {
            "description": "Товар не знайдено",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Product not found"
                }
              }
            }
          },
          "500": {
            "description": "Помилка сервера",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Server error"
                }
              }
            }
          }
        }
      }
    },
    "/users/register": {
      "post": {
        "tags": ["Auth"],
        "summary": "Зареєструвати нового користувача",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "email": "user@example.com",
                "password": "securepassword123",
                "name": "Іван Петров"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Успішно зареєстровано",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {}
                }
              }
            }
          },
          "400": {
            "description": "Помилка валідації",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Validation error"
                }
              }
            }
          }
        }
      }
    },
    "/users/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Аутентифікація користувача",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "email": "user@example.com",
                "password": "securepassword123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успішна аутентифікація",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "token": "jwt-token"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Невірні дані",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Invalid credentials"
                }
              }
            }
          }
        }
      }
    },
    "/users/me": {
      "get": {
        "tags": ["Users"],
        "summary": "Отримати інформацію про поточного користувача",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "id": 101,
                    "email": "user@example.com",
                    "firstname": "Іван",
                    "secound": "Петров",
                    "thirdname": "Александровіч",
                    "birthdate": "15/01/2001",
                    "number": "+380991160302"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Не авторизовано",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Unauthorized"
                }
              }
            }
          }
        }
      }
    },
    "/users/me/addresses": {
      "get": {
        "tags": ["Users"],
        "summary": "Отримати адреси користувача",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": [
                    {
                      "id": 1,
                      "city": "Dnipro",
                      "street": "Marshal Malinovsky St.",
                      "house": "114",
                      "apartment": "42",
                      "entrance": "3"
                    },
                    {
                      "id": 2,
                      "city": "Kyiv",
                      "street": "Khreshchatyk St.",
                      "house": "1",
                      "apartment": "67",
                      "entrance": "4"
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Помилка",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": ""
                }
              }
            }
          }
        }
      }
    },
    "/users/recovery": {
      "patch": {
        "tags": ["Auth"],
        "summary": "Відновлення пароля",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "email": "user@example.com"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": ""
                }
              }
            }
          },
          "400": {
            "description": "Невірний email",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Invalid email"
                }
              }
            }
          }
        }
      }
    },
    "/users/recovery/{code}": {
      "patch": {
        "tags": ["Auth"],
        "summary": "Встановлення нового пароля",
        "parameters": [
          {
            "name": "code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "password": "passwordexample123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": ""
                }
              }
            }
          },
          "400": {
            "description": "Невірний пароль",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Invalid password"
                }
              }
            }
          }
        }
      }
    },
    "/users/me/order": {
      "get": {
        "tags": ["Orders"],
        "summary": "Завантаження усіх замовлень",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "orders": [
                      {
                        "name": "",
                        "secondName": "",
                        "middleName": "",
                        "orderId": "30349",
                        "orderDate": "20.04.2023",
                        "trackingNumber": "20030040050000",
                        "deliveryAddress": "Нова Пошта до відділення, Дніпро, Відділення №1: вул. Маршала Малиновського, 114",
                        "paymentMethod": "Накладений платіж",
                        "items": [
                          {
                            "id": "1",
                            "name": "DJI Mini 4K",
                            "image": "/shared/img/orders/drones/DjiMini4K.jpg",
                            "quantity": 2,
                            "price": 1002
                          }
                        ],
                        "fullPrice": 29990,
                        "discount": 1005,
                        "priceReduced": 12322
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Не авторизовано",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "data": {}
                }
              }
            }
          },
          "404": {
            "description": "Замовлень не знайдено",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Активних замовлень не знайдено"
                }
              }
            }
          }
        }
      }
    },
    "/users/me/order/cancel": {
      "post": {
        "tags": ["Orders"],
        "summary": "Скасувати замовлення",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "id": "4"
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {}
                }
              }
            }
          },
          "401": {
            "description": "Не авторизовано",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "data": {}
                }
              }
            }
          },
          "404": {
            "description": "Замовлень не знайдено",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Активних замовлень не знайдено"
                }
              }
            }
          }
        }
      }
    },
     "/users/me/order-status": {
      "get": {
        "tags": ["Orders"],
        "summary": "Перегляд статусу замовлення",
        "description": "полінг кожні 40 секунд",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "orders": [
                      {
                        "trackingNumber": "20030040050000",
                        "status": "status of the package"
                      },
                      {
                        "trackingNumber": "200300401234128",
                        "status": "status of the package"
                      },
                      {
                        "trackingNumber": "1234123412343",
                        "status": "status of the package"
                      }
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Не авторизовано",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "data": {}
                }
              }
            }
          },
          "404": {
            "description": "Замовлень не знайдено",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Активних замовлень не знайдено"
                }
              }
            }
          }
        }
      }
    },
    "/support": {
      "post": {
        "tags": ["Support"],
        "summary": "Звернення у підтримку",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "name": "Іван",
                "number": "+380/99/116/03/02",
                "email": "user@example.com",
                "description": "Потрібна допомога у повертанні замовлення DJI Mini 4K"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успіх",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {}
                }
              }
            }
          },
          "401": {
            "description": "Не авторизовано",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "data": {}
                }
              }
            }
          }
        }
      }
    },
    "/users/me/": {
      "patch": {
        "tags": ["Users"],
        "summary": "Оновлення даних користувача",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "firstName": "Анастасія",
                "secoundname": "Павленко",
                "thirdmame": "Александрівна",
                "birthDate": "1995-05-20",
                "phone": "+380991234568",
                "email": "anastasia.p@example.com"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успішно оновлено",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "firstName": "Анастасія",
                    "secoundname": "Павленко",
                    "thirdmame": "Александрівна",
                    "birthDate": "1995-05-20",
                    "phone": "+380991234568",
                    "email": "anastasia.p@example.com"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Помилка валідації",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Invalid email"
                }
              }
            }
          }
        }
      }
    },
    "/users/me/addresses   ": {
      "patch": {
        "tags": ["Users"],
        "summary": "Оновлення адреси",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "addressId": "123",
                "city": "Дніпро",
                "street": "вул. Маршала Малиновського",
                "houseNumber": "114",
                "apartment": "12",
                "entrance": "11"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успішно оновлено",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "addressId": "123",
                    "city": "Дніпро",
                    "street": "вул. Маршала Малиновського",
                    "houseNumber": "114",
                    "apartment": "12",
                    "entrance": "11"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Помилка валідації",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Invalid email"
                }
              }
            }
          }
        }
      }
    },
    "/users/me/addresses  ": {
      "post": {
        "tags": ["Users"],
        "summary": "Створення адреси",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "addressId": "123",
                "city": "Дніпро",
                "street": "вул. Маршала Малиновського",
                "houseNumber": "114",
                "apartment": "12",
                "entrance": "11"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успішно створено",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "addressId": "123",
                    "city": "Дніпро",
                    "street": "вул. Маршала Малиновського",
                    "houseNumber": "114",
                    "apartment": "12",
                    "entrance": "11"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Помилка валідації",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Invalid email"
                }
              }
            }
          }
        }
      }
    },
    "/users/me/addresses ": {
      "delete": {
        "tags": ["Users"],
        "summary": "Видалення адресси",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "id": "1"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Успішно видалено",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {}
                }
              }
            }
          }
        }
      }
    },
    "/products/suggestions": {
      "get": {
        "tags": ["Products"],
        "summary": "Отримати список товарів за критеріями",
        "parameters": [
          {
            "name": "new",
            "in": "query",
            "description": "Фільтр для нових товарів",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "popular",
            "in": "query",
            "description": "Фільтр для популярних товарів",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Зсув для пагінації",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Максимальна кількість результатів",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200,
              "default": 10
            }
          },
          {
            "name": "perPage",
            "in": "query",
            "description": "Кількість елементів на сторінку",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200,
              "default": 20
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Сторінка пагінації",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Успішно отримано",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "data": {
                    "products": [
                      {
                        "id": 1,
                        "name": "Drone X1",
                        "price": 1200,
                        "image": "picture",
                        "discount": 50,
                        "category": {
                          "id": 1,
                          "name": "drone"
                        }
                      },
                      {
                        "id": 2,
                        "name": "Thermal Cam T2",
                        "price": 1500,
                        "image": "picture",
                        "discount": 10,
                        "category": {
                          "id": 2,
                          "name": "thermal"
                        }
                      }
                    ]
                  }
                }
              }
            }
          },
          "500": {
            "description": "Помилка сервера",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "message": "Server error. Please try later"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}